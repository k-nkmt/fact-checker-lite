# Fact-Cheker 解説
以下は公開日(2025-05-26)時点のものになります。更新により変わっている可能性があることにはご注意ください。

## 概要
誤情報が拡散されてしまうことを防ぐためのアラート用のシステムです。
現在のチェックの対象はX(旧Twitter)で、マニフェストを記載したマークダウン形式の文書などあらかじめ読み込んだ文書ファイルを元に、感想／意見など主観的なものは除いた、客観的で検証可能な投稿の内容について、データソースと矛盾（誤りがある）がある場合にはSlackに通知を出す、という動作になっています。  

### AI関連の仕様
使用するサービスにはOpenAI社が選択されており、モデルはo3-miniが指定されています。  
いわゆるRAG(Retrieval-Augmented Generation)と呼ばれる、外部の信頼できる情報を参照することで、より正確で最新の情報に基づいた回答がされます。
チームみらいの場合は[マニフェスト](https://github.com/team-mirai/policy)のファイルをOpenAIにアップロードして参照するようになっています。
OpenAI社では、意味的に類似する参考資料を参考に回答させるのに必要となるベクトルストアのサービスも提供しており、シンプルにシステムを実装できることが採用の要因になっているかと思います。

### ライセンス
AGPLライセンスとなっています。
そのためコードを改変して利用する際には、改変したコードを配布する場合に加えて、Webサービスとして公開する場合にもコードの公開義務があります。

### 実行環境
honoという Node.js, Deno, Bunといった主要なJavaScriptランタイムで動作するWEBフレームワークが使用されています。  
ローカルに開発環境を準備したり、node.jsに対応しているような一般的なクラウドサービスであれば、実行することができます。  

AIの部分についてローカルで簡易的に動作を試してみたい、というような方は、pythonとjupyter notebookのみで実行可能な[fact-checker-lite.ipynb](fact-checker-lite.ipynb)を使用してみてください。

## カスタマイズ
他の政党、政治家による利用も想定されていますが、現在は使用するにあたりID・パスワード的なもの以外でも一部カスタマイズが必要な部分があります。

### X(旧Twitter)の検索対象
https://github.com/team-mirai/fact-checker/blob/3961ab7608a5ea75ad6350bcacfd23e1ab5dbce2/src/index.ts#L71 で検索条件が指定されています。  
基本的には変更が必須です。  
またこの部分を参考に追加・修正すればX以外のSNSをチェックすることも可能です。  

こちらは変更が必要ではありませんが、Slackへの通知テストを任意の文章で行いたい場合にはhttps://github.com/team-mirai/fact-checker/blob/15718cf7926685f0c5f15ad2fbf056009fb7a2a6/src/index.ts#L42の部分も変更しておくといいかと思います。

### 参照する情報
scripts/upload.tsを実行すると、policyフォルダのマークダウンファイルをOpenAIにアップロードするようになっています。
参照先や対象を変更するか、scripts/upload.tsは実行せずにOpenAI側でファイルのアップロードを行い、適宜vector store IDを指定することでも対応可能です。

### モデルとプロンプト
こちらは必須ではなく好みになりますが、
https://github.com/team-mirai/fact-checker/blob/3961ab7608a5ea75ad6350bcacfd23e1ab5dbce2/src/lib/fact-check.ts#L16 に指定があります。
OpenAI社以外のモデルを使用したい場合には、langchain等のライブラリを使用するなどの対応が必要になります。